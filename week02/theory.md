# Практиукум #2

## Файлове

В реалния свят на програмирането, доста често се налага данните, които обработват нашите програми да бъдат запазвани след приключване на изпълнението на програмата (или след като натиснете Х на IDE-то). За жалост тогава всичките данни ще бъдат заличени от нашия компютър. Тук идват на помощ **файловете** - използвайки ги, данните могат да бъдат запазни на вашият hard drive, където ще стоят складирани перманентно. Ако случайно ви спре тока, може да ги възстановите.

### Основни концепции


В C++ има класове за работа с файлове. За да използваме тези класове, трябва да добавим следната библиотека в началото на програмата:

```c++
#include <fstream>
```


Запис във файл

Стъпките за запис на данни във файл са следните:
- отваряне на файл ( с права за запис )
- запис във файла
- затваряне на файла

Записването на информация във файл става по следния начин:

```c++
// Отваряне на файла 

// Забележете, че се използва класът ofstream ( името идва от: output file stream ),
// който отваря файла за запис ( за четене от файл се използва ifstream )

ofstream myfile;

myfile.open("example.txt");

// След като файлът вече е отворен за запис,
// можем да записваме колкото желаем редове във файла, например:

// Запис на един ред текст във файла
// \n служи за преминаване на нов ред

myfile << "Writing this to a file\n";

// Затваряне на файла

myfile.close();

// След изпълнението на кода, програмата ще създаде текстов файл с име example.txt,
// в който има един ред текст: Writing this to a file
```
<h2> Друг пример:</h2>

```c++
#include <iostream>
#include <fstream>

int main() {
    // Open file for writing
    std::ofstream file("example.txt");

    if (file.is_open()) {
        // Write to file
        file << "Hello, world!" << std::endl;

        // Close file
        file.close();

        std::cout << "Data written to file successfully!" << std::endl;
    } else {
        std::cout << "Error opening file!" << std::endl;
    }

    return 0;
}
```



Четене от файл

Стъпките за "прочитане" ( зареждане на информацията от файл ) са аналогични:
- отваряне на файл ( с права за четене )
- четене на данни от файла
- затваряне на файла

Прочитането на информация от файл става по следния начин:

```c++
// Отваряне на файла 
// Използва се класът ifstream ( името идва от: input file stream ),
// който отваря файла с права за четене

ifstream myfile;

myfile.open("example.txt");

// След като файлът вече е отворен за четене,
// можем да зареждаме данните от файла в програмата:

// Следващият цикъл while прочита информацията от файла символ по символ.
// Цикълът while се изпълнява многократно ( по веднъж за всеки символ от файла )
// и всеки път ( използвайки методът get() ) от файла се прочита един символ и се отпечатва на екрана
// Т.е, цикълът while ще се изпълни толкова пъти, колкото символи има във файла

char c;

while( myfile.get(c) )
      cout << c;

// Затваряне на файла

myfile.close();

// След изпълнението на кода, програмата ще отпечата съдържанието на example.txt на екрана
```


```c++
#include <iostream>
#include <fstream>

int main() {
    // Open file for writing
    std::ofstream file("example.txt");

    if (file.is_open()) {
        // Write to file
        file << "Hello, world!" << std::endl;

        // Close file
        file.close();

        std::cout << "Data written to file successfully!" << std::endl;
    } else {
        std::cout << "Error opening file!" << std::endl;
    }

    return 0;
}

```

### Режими на работа, указатели get и put

При отваряне на файл, освен да подадете като първи параметър пътя до файла и неговото разширение, вие може да подадете и **режим на работа** на този файл. В таблицата са показани режимите и техните описания

| режим на работа |описание| 
| :---: | :---: | 
|ios::in | Отваря файла за четене. |
|ios::out | Отваря файла за запис, като изтрива съдържанието му, ако той съществува. |
|ios::app | Отваря файла за запис (добавяне) в края на файла. |
|ios::ate | Отваря файла за запис и установява put указателя в края на файла, като предишнотосъдържание се запазва. Указателят може да се премества на произволни места. |
|ios::trunc | Отваря файл, ако той съществува изтрива съдържанието му. |
|ios::nocreate | Ако файлът съществува той се отваря. Не се създава файл с посоченото име | 
|ios::noreplace | Създава и отваря файл с посоченото име, само ако такъв файл не съществува.
|ios::binary | Превключва режима за достъп до файл от текстов в двоичен.
 |

По default, ofstream има закачен за него режим **ios::out**, съответно ifstream има закачен **ios::in**. Ако искаме да ползваме и двете едновременно в един обект, използваме ``fstream``, но трябва изрично да му казваме кой режим да ползва.

```c++
    std::fstream file;

    // при output
    file.open("fileBoth.txt", std::ios::out);

    // при input
    file.open("fileBoth.txt", std::ios::in);
```

### Указатели „get“ и „put“.
 
**put** указателя се поставя там от където искате да започнете да
пишете във файла, а **get** се поставя там от където искате да започнете да четете от файла. И двата
указателя се местят автоматично и последователно към края на файла, но могат и да им се задават
определени позиции. Ето и кои са основните режими за работа:

При всяко въвеждане и извеждане put и get указателите се позиционират на мястото където е
завършило въвеждането или извеждането. За вземане (връщане) и промяна на техните позиции се
използват следните стандартни функции включени в библиотеката fstream:
1) **tellg();** - връща цяло число, указващо позицията на get указателя във файла
2) **tellp();** - връща цяло число, указващо позицията на put указателя във файла
3) **seekg(цяло_число);** - премества get указателя на позиция с номер цяло_число, от
където ще се извърши следващото извеждане.
4) **seekp(цяло_число);** - премества put указателя на позиция с номер цяло_число, от
където ще се извърши следващото въвеждане.



